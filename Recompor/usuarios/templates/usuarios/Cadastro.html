{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link rel="stylesheet" href="{% static 'css/cadastro.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <style>
        #botaoFoto{
            background-color: #bece67;;
            padding:10px;
            margin:10px;
            cursor:pointer;
            color:gray;
        }

        .botaoFoto {
            background-color: #99B83C;
            border: 1px solid #99B83C;
            transition: background-color .5s;
            padding:10px;
            margin:10px;
            cursor:pointer;
            color:white;
        }
        .botaoFoto:hover {
            background-color:rgb(129, 155, 51);
            border: 1px solid #99B83C;
            color:rgb(255, 255, 255);
        }


        #modalFotos{
            display:none; 
            position: fixed; 
            top:0; 
            left:0; 
            width:100%; 
            height:100%; 
            background: rgba(0,0,0,0.6);
            align-items: center; 
            justify-content: center;
        }
        
        

    </style>

</head>
<body>
    <div class="container">
        <div class="content first-content">
            <div class="first-column">
                <h2 class="title title-primary">Bem-vindo de volta!</h2>
                <p class="description description-primary">Para se manter conectado</p>
                <p class="description description-primary">Venha fazer login!!</p>
                <a href="{% url 'usuarios:logar' %}"><button class="btn btn-primary">Logar</button></a>
            </div>    

            <div class="second-column">
                <h2 class="title title-second" style="font-size: 30px;">criar conta</h2>
                <div class="max-width"></div>

                <!-- FORMULÁRIO DE CADASTRO -->
                <form action="{% url 'usuarios:entrar' %}" id="form_contato" class="form" method="post">
                    {% csrf_token %}
                    <!-- Campo: Escolher Foto de Perfil -->
                    <div class="imageContainer" style="text-align: center;">
                        <!-- Campo escondido que envia a foto selecionada -->
                        <input type="hidden" name="foto" id="foto" value="foto1.png">

                        <!-- Imagem de pré-visualização -->
                        <div style="margin-top: 10px;">
                            <img id="preview" src="{% static 'img/icon_user.png' %}" alt="Pré-visualização" width="100" height="100"
                            style="border-radius: 50%; border: 2px solid #ccc;">
                        </div>

                        <!-- Botão de abrir modal: agora está fora do modal -->
                        <button  class="botaoFoto" type="button" onclick="abrirModal()" style="margin-top: 15px;">Selecionar Foto</button>
                        
                        </div>

                        <!-- Modal -->
                        <div id="modalFotos" >
                            <div style="background: white; padding: 20px; border-radius: 8px; max-width: 400px; width: 90%; text-align:center;">
                                <h3>Escolha uma foto</h3>
                                <div style="display: flex; justify-content: space-around; margin-top: 15px;">
                                    <img src="{% static 'img/foto1.png' %}" alt="Foto 1" width="80" height="80" style="border-radius: 50%; cursor: pointer; border: 2px solid transparent;" onclick="selecionarFoto('foto1.png')">
                                    <img src="{% static 'img/foto2.png' %}" alt="Foto 2" width="80" height="80" style="border-radius: 50%; cursor: pointer; border: 2px solid transparent;" onclick="selecionarFoto('foto2.png')">
                                    <img src="{% static 'img/foto3.png' %}" alt="Foto 3" width="80" height="80" style="border-radius: 50%; cursor: pointer; border: 2px solid transparent;" onclick="selecionarFoto('foto3.png')">
                                </div>
                                <button style="margin-top: 20px;" onclick="fecharModal()">Cancelar</button>
                            </div>
                        </div>

                        <script>
                        const caminhoBase = "{% static 'img/' %}";

                        function abrirModal() {
                            document.getElementById('modalFotos').style.display = 'flex';
                        }

                        function fecharModal() {
                            document.getElementById('modalFotos').style.display = 'none';
                        }

                        function selecionarFoto(nomeFoto) {
                            document.getElementById('foto').value = nomeFoto;
                            document.getElementById('preview').src = caminhoBase + nomeFoto;
                            fecharModal();
                        }
                        </script>

                    
                    <!-- Campo: Nome -->
                    <label class="label-input" for="text_nome">
                        <i class="far fa-user icon-modify"></i>
                        <input type="text" id="txt_nome" required placeholder="Nome de Usuário" name="username">
                    </label>
                    
                    <!-- Campo: Email -->
                    <label class="label-input" for="txt_email">
                        <i class="far fa-envelope icon-modify"></i>
                        <input type="email" id="txt_email" required placeholder="Email" name="email">
                    </label>
                    
                    <!-- Campo: Senha -->
                    <label class="label-input" for="">
                        <i class="fas fa-lock icon-modify"></i>
                        <input type="password" id="password" minlength="6" maxlength="12" onKeyUp="verificaForcaSenha();" placeholder="Senha" name="senha">
                        <i class="bi bi-eye" style="width: 30px;cursor: pointer;color: #808080;" id="btn-senha-C" onclick="mostraSenhaCadastro()"></i>
                    </label>
                    <span id="password-status"></span>

                    

                    <!-- Política -->
                    <div>
                        <h2>
                            <input id="caixa" type="checkbox">
                            <a href="#" id="priv">Política de Privacidade</a>
                        </h2>
                    </div>

                    <!-- Botão -->
                    <button class="btn btn-second">Cadastrar</button>        
                </form>
            </div>
        </div>

        <!-- TELA DE LOGIN DESATIVADA -->
        <div class="content second-content">
            <div class="first-column">
                <h2 class="title title-primary">Olá Usúario!</h2>
                <p class="description description-primary">Venha ser mais um de nós</p>
                <p class="description description-primary">e tornar o mundo um lar mais verde. </p>
                <button id="signup" class="btn btn-primary">Entrar</button>
            </div>
            <div class="second-column">
                <h2 class="title title-second" style="align-items: last baseline; height: 60px; font-size: 30px;">Bem-vindo</h2>
            </div>
        </div>
    </div>
    <script src="{% static 'js/cadastro.js' %}"></script>

    <!-- Scripts -->
    <script src="{% static 'js/animaLC.js' %}"></script>

    <!-- VLibras -->
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
          <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>

    <!-- Script: Pré-visualização da imagem -->
    <script>
        function atualizarImagem() {
            const select = document.getElementById('foto');
            const preview = document.getElementById('preview');
            const valor = select.value;
            preview.src = `/static/img/${valor}`;
        }
    </script>

    <!-- Script: Força da senha -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-..." crossorigin="anonymous"></script>
    <script>
        function verificaForcaSenha() {
            var numeros = /([0-9])/;
            var alfabeto = /([a-zA-Z])/;
            var chEspeciais = /([~,!,@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;

            if ($('#password').val().length < 6) {
                $('#password-status').html("<span style='color:red;FONT-SIZE: 12PX;'>Fraco, insira no mínimo 6 caracteres</span>");
            } else {
                if ($('#password').val().match(numeros) && $('#password').val().match(alfabeto) && $('#password').val().match(chEspeciais)) {
                    $('#password-status').html("<span style='color:green;FONT-SIZE: 12PX;'><b>Forte</b></span>");
                } else {
                    $('#password-status').html("<span style='color:orange;FONT-SIZE: 12PX;'>Médio, insira um caracter especial</span>");
                }
            }
        }
    </script>

</body>
</html>
